#if defined(YP_IN_ARCADIA)
#include <yt/build/ya_version.h>
#endif

#include <util/generic/strbuf.h>

namespace NYT {

////////////////////////////////////////////////////////////////////////////////

// These override weak definitions from yt/build.
int GetVersionMajor()
{
    return @YP_VERSION_MAJOR@;
}

int GetVersionMinor()
{
    return @YP_VERSION_MINOR@;
}

int GetVersionPatch()
{
    return @YP_VERSION_PATCH@;
}

#if defined(YP_IN_ARCADIA)

const char* GetVersion()
{
    static auto version = CreateYTVersion(@YP_VERSION_MAJOR@, @YP_VERSION_MINOR@, @YP_VERSION_PATCH@, "@YT_VERSION_BRANCH@");
    return version.c_str();
}

const char* GetBuildHost()
{
    static auto buildHost = GetYaHostName();
    return buildHost.data();
}

const char* GetBuildMachine()
{
    return "unknown";
}

const char* GetBuildTime()
{
    static auto buildDate = GetYaBuildDate();
    return buildDate.data();
}

// Reuse GetBuildHost, GetBuildMachine, GetBuildTime from yt/build

#else

const char* GetVersion()
{
    return "@YP_VERSION@";
}

const char* GetBuildHost()
{
    return "@YP_BUILD_HOST@";
}

const char* GetBuildMachine()
{
    return "@YP_BUILD_MACHINE@";
}

const char* GetBuildTime()
{
    return "@YP_BUILD_TIME@";
}

#endif

////////////////////////////////////////////////////////////////////////////////

} // namespace NYT

