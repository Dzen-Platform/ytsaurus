# Назначение
Драйвер JDBC применяется в первую очередь как универсальный интерфейс для выполнения запросов в YT через IDEA DataGrip и подобные ему системы.
Драйвер в настоящий момент не поддерживает вставку или удаление данных.

# Нюансы

## Возможность написать 'select *'
Реализовано на уровне драйвера JDBC, пока не будет поддержки в YT:
```
select * from [TABLE_NAME] order by FIELD limit 10
```

## Ограничение на запросы по большим таблицам
По умолчанию запросы ограничены лимитом чтения в 10 000 000 строк (т.е. запросы должны использовать эффективные ключи).
Это можно изменить параметром `max_input_limit` в настройках подключения.

## Домашний каталог
Параметры `home` и `scan_recursive` в настройках подключения используется для отображения списка доступных таблиц 
в редакторе запросов (например, в IDEA). Слишком общий префикс (например, `//home`) может показать вам слишком много таблиц.  
 

# Где скачать
https://proxy.sandbox.yandex-team.ru/1198975101

# Регистрация в IDEA

## Регистрация драйвера
Зарегистрируйте новый драйвер из JAR файла: `Class: ru.yandex.yt.jdbc.YtDriver`

```
URL Templates:
Default, jdbc:yt:[{host}]
```

В разделе Advanced:
```
username: <ваше имя пользователя>
token: <токен или путь к файлу с токеном в виде file:~/.yt/token>
compression: <рекомендуется Lz4>
home: <путь в дереве, с которым вы хотите работать; например //home/market/pricelabs>
```

## Регистрация DataSource-а

Создайте новый DataSource с только что зарегистрированным драйвером: `jdbc:yt:<YT кластер>[:порт]` (например, `jdbc:yt:zeno`)


## Замечания по работе

### Первичное подключение
Подключение может занять достаточно много времени (несколько секунд), т.к. оно инициализируется со всеми RPC прокси,
доступными для работы.

Все последующие запросы будут выполняться быстро.

### Обрамление таблиц

В настоящий момент IDEA выводит подсказки к таблицам и вставляет их с `"` символами.
```
select * from "//home/pricelabs/testing/shops"
```

Их придется вручную заменять на стандартные `[]`:
```
select * from [//home/pricelabs/testing/shops]
```

# Сборка

## Сборка uber-jar для распространения
`ya make -DJDK_VERSION=8 ub`