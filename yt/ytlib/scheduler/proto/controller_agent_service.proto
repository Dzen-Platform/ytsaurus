package NYT.NScheduler.NProto;

import "yt/core/misc/proto/guid.proto";

////////////////////////////////////////////////////////////////////////////////

message TJobResources
{
    optional int32 user_slots = 1;
    optional double cpu = 2;
    optional int64 memory = 3;
    optional int32 network = 4;
}

message TExecNodeDescriptor
{
    required int32 node_id = 1;
    required string address = 2;
    required double io_weight = 3;
    required TJobResources resource_limits = 4;
    repeated string tags = 5;
}

message TExecNodeDescriptorList
{
    repeated TExecNodeDescriptor exec_nodes = 1;
}

message TOperationJobMetrics
{
    required NYT.NProto.TGuid operation_id = 1;
    optional int64 disk_reads = 2;
    optional int64 disk_writes = 3;
    optional int64 time_completed = 4;
    optional int64 time_aborted = 5;
}

////////////////////////////////////////////////////////////////////////////////

message TReqHeartbeat
{
    repeated TOperationJobMetrics job_metrics = 1;
}

message TRspHeartbeat
{
    optional TExecNodeDescriptorList exec_nodes = 1;
}

////////////////////////////////////////////////////////////////////////////////

