package NYT.NTableClient.NProto;

import "yt/core/misc/guid.proto";
import "yt/ytlib/table_client/chunk_meta.proto";
import "yt/ytlib/hive/cell_directory.proto";

////////////////////////////////////////////////////////////////////////////////

message TReqMount
{
    // If omitted then all tablets are affected.
    required int32 first_tablet_index = 1 [default = -1];
    required int32 last_tablet_index = 2 [default = -1];

    // If omitted then cell is chosen automatically.
    optional NYT.NProto.TGuid cell_id = 3;
}

message TRspMount
{ }

////////////////////////////////////////////////////////////////////////////////

message TReqUnmount
{
    // If omitted then all tablets are affected.
    required int32 first_tablet_index = 1 [default = -1];
    required int32 last_tablet_index = 2 [default = -1];
    required bool force = 3 [default = false];
}

message TRspUnmount
{ }

////////////////////////////////////////////////////////////////////////////////

message TReqRemount
{
    // If omitted then all tablets are affected.
    required int32 first_tablet_index = 1 [default = -1];
    required int32 last_tablet_index = 2 [default = -1];
}

message TRspRemount
{ }

////////////////////////////////////////////////////////////////////////////////

message TReqReshard
{
    // If omitted then all tablets are affected.
    required int32 first_tablet_index = 1 [default = -1];
    required int32 last_tablet_index = 2 [default = -1];
    repeated bytes pivot_keys = 3;
}

message TRspReshard
{ }

////////////////////////////////////////////////////////////////////////////////

message TReqGetMountInfo
{ }

message TTabletInfo
{
    required NYT.NProto.TGuid tablet_id = 1;
    required int64 mount_revision = 7;
    required int32 state = 2;
    required bytes pivot_key = 3;
    optional NYT.NProto.TGuid cell_id = 4;
    optional int32 cell_config_version = 5;
    repeated int32 replica_node_ids = 6;
}

message TRspGetMountInfo
{
    required NYT.NProto.TGuid table_id = 1;
    required TTableSchemaExt schema = 2;
    repeated TTabletInfo tablets = 3;
    repeated NYT.NHive.NProto.TCellDescriptor tablet_cells = 4;
    required bool dynamic = 5;
}

////////////////////////////////////////////////////////////////////////////////

message TReqAlter
{
    optional TTableSchemaExt schema = 1;
}

message TRspAlter
{ }

////////////////////////////////////////////////////////////////////////////////
