bison( ${CMAKE_CURRENT_LIST_DIR}/parser.yy YT_SOURCE_FILES )
ragel( ${CMAKE_CURRENT_LIST_DIR}/lexer.rl YT_SOURCE_FILES )

protoc( ${CMAKE_CURRENT_LIST_DIR}/query_statistics.proto YT_SOURCE_FILES )
protoc( ${CMAKE_CURRENT_LIST_DIR}/query.proto YT_SOURCE_FILES )
protoc( ${CMAKE_CURRENT_LIST_DIR}/functions_cache.proto YT_SOURCE_FILES )
protoc( ${CMAKE_CURRENT_LIST_DIR}/query_service.proto YT_SOURCE_FILES )

udf_bc(
  ${CMAKE_CURRENT_LIST_DIR}/udf/hyperloglog.cpp
  YT_SOURCE_FILES
  SYMBOLS
    cardinality_init
    cardinality_update
    cardinality_merge
    cardinality_finalize
  FILES
    ${CMAKE_SOURCE_DIR}/yt/ytlib/table_client/unversioned_value.cpp
    ${CMAKE_SOURCE_DIR}/yt/contrib/farmhash/farmhash.cc
)
udf_bc(
  ${CMAKE_CURRENT_LIST_DIR}/udf/farm_hash.cpp
  YT_SOURCE_FILES
  FILES
    ${CMAKE_SOURCE_DIR}/yt/ytlib/table_client/unversioned_value.cpp
    ${CMAKE_SOURCE_DIR}/yt/contrib/farmhash/farmhash.cc
)
udf_bc(
  ${CMAKE_CURRENT_LIST_DIR}/udf/regex.cpp
  YT_SOURCE_FILES
  FILES
    ${CMAKE_SOURCE_DIR}/yt/ytlib/query_client/function_context.cpp
  SYMBOLS
    regex_full_match
    regex_partial_match
    regex_replace_first
    regex_replace_all
    regex_extract
    regex_escape
)
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/is_substr.c YT_SOURCE_FILES )
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/is_prefix.c YT_SOURCE_FILES )
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/concat.c YT_SOURCE_FILES )
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/sleep.c YT_SOURCE_FILES )
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/min.c YT_SOURCE_FILES )
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/max.c YT_SOURCE_FILES )
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/sum.c YT_SOURCE_FILES )
udf_bc( ${CMAKE_CURRENT_LIST_DIR}/udf/avg.c YT_SOURCE_FILES )

udf_bc(
  ${CMAKE_CURRENT_LIST_DIR}/udf/lower.cpp
  YT_SOURCE_FILES
  FILES
    ${CMAKE_SOURCE_DIR}/util/charset/utf8.cpp
)

udf_bc(
  ${CMAKE_CURRENT_LIST_DIR}/udf/dates.c
  YT_SOURCE_FILES
  SYMBOLS
    format_timestamp
    timestamp_floor_hour
    timestamp_floor_day
    timestamp_floor_week
    timestamp_floor_month
    timestamp_floor_year
)
